<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Railways Ticketing System</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: https:; style-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com 'unsafe-inline'; script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="railways.css">
</head>
<body data-bs-theme="light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">Railways</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent" aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navContent">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#search">Search</a></li>
                    <li class="nav-item"><a class="nav-link" href="#pnr">PNR</a></li>
                    <li class="nav-item"><a class="nav-link" href="#train-status">Train Status</a></li>
                    <li class="nav-item"><a class="nav-link" href="#support">Support</a></li>
                </ul>
                <div class="ms-lg-3 d-flex">
                    <button id="themeToggle" class="btn btn-outline-light btn-sm" type="button"><i class="fa fa-moon me-2"></i><span>Dark</span></button>
                </div>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <div class="container py-5 text-center text-light">
            <h1 class="display-5 fw-semibold">Book Train Tickets Instantly</h1>
            <p class="lead mb-4">Real-time availability, secure payments, and 24x7 support</p>
            <div class="search-card shadow-lg mx-auto" id="search">
                <form id="searchForm" class="row g-3 p-3 p-md-4">
                    <div class="col-md-3">
                        <label for="fromStation" class="form-label">From</label>
                        <input type="text" class="form-control" id="fromStation" list="stationList" placeholder="e.g., Delhi or NDLS" required>
                    </div>
                    <div class="col-md-3">
                        <label for="toStation" class="form-label">To</label>
                        <input type="text" class="form-control" id="toStation" list="stationList" placeholder="e.g., Mumbai or BCT" required>
                    </div>
                    <div class="col-md-3">
                        <label for="journeyDate" class="form-label">Date</label>
                        <input type="date" class="form-control" id="journeyDate" required>
                    </div>
                    <div class="col-md-2">
                        <label for="travelClass" class="form-label">Class</label>
                        <select id="travelClass" class="form-select">
                            <option value="SL">Sleeper (SL)</option>
                            <option value="3A">3A</option>
                            <option value="2A">2A</option>
                            <option value="1A">1A</option>
                        </select>
                    </div>
                    <div class="col-md-1 d-grid">
                        <label class="form-label opacity-0">Search</label>
                        <button type="submit" class="btn btn-success"><i class="fa fa-search me-2"></i>Search</button>
                    </div>
                </form>
                <datalist id="stationList"></datalist>
            </div>
        </div>
    </header>

    <main class="container my-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="card-title mb-0">Available Trains</h5>
                    <small class="text-muted" id="realtimeBadge"><i class="fa fa-signal me-1"></i>Real-time availability</small>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped align-middle mb-0" id="resultsTable">
                        <thead>
                            <tr>
                                <th>Train</th>
                                <th>Route</th>
                                <th>Departure</th>
                                <th>Arrival</th>
                                <th>Duration</th>
                                <th>Availability</th>
                                <th>Fare</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="resultsBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <section id="pnr" class="mt-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">PNR Status</h5>
                    <div class="row g-2">
                        <div class="col-md-6">
                            <input type="text" id="pnrInput" class="form-control" placeholder="Enter PNR" inputmode="numeric" maxlength="12">
                        </div>
                        <div class="col-md-3 d-grid d-md-block">
                            <button id="pnrLookupBtn" class="btn btn-outline-primary"><i class="fa fa-magnifying-glass me-2"></i>Check Status</button>
                        </div>
                        <div class="col-12 mt-3">
                            <div id="pnrResult" class="alert d-none" role="alert"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="train-status" class="mt-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Train Running Status</h5>
                    <div class="row g-2 align-items-center">
                        <div class="col-md-4">
                            <input type="text" id="trainStatusNumber" class="form-control" placeholder="Enter Train Number (e.g., 12951)" inputmode="numeric" maxlength="5">
                        </div>
                        <div class="col-md-3 d-grid d-md-block">
                            <button id="trainStatusBtn" class="btn btn-outline-success"><i class="fa fa-train me-2"></i>Get Status</button>
                        </div>
                        <div class="col-12 mt-3">
                            <div id="trainStatusResult" class="alert d-none" role="alert"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="support" class="mt-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="card-title mb-0">Customer Support</h5>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#chatModal"><i class="fa fa-comments me-2"></i>Chat</button>
                    </div>
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="q1">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1">How do I refund a ticket?</button>
                            </h2>
                            <div id="a1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">Refunds are processed to your original payment method within 5-7 business days for eligible tickets.</div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="q2">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2">Is my payment secure?</button>
                            </h2>
                            <div id="a2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">We use PCI-DSS aligned practices, do not store card data, and process payments over HTTPS.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="py-4 bg-light mt-5 border-top">
        <div class="container d-flex justify-content-between align-items-center">
            <span class="text-muted">Â© 2025 Railways. All rights reserved.</span>
            <div class="d-flex gap-3">
                <a href="#support" class="link-secondary">Help</a>
                <a href="#" class="link-secondary">Terms</a>
                <a href="#" class="link-secondary">Privacy</a>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="bookingModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Passenger Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="selectedSummary" class="small text-muted mb-3"></div>
                    <form id="passengerForm" class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label" for="passengerName">Full Name</label>
                            <input class="form-control" id="passengerName" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label" for="passengerAge">Age</label>
                            <input class="form-control" id="passengerAge" type="number" min="1" max="120" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label" for="passengerGender">Gender</label>
                            <select id="passengerGender" class="form-select" required>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="contactEmail">Email</label>
                            <input class="form-control" id="contactEmail" type="email" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="contactPhone">Phone</label>
                            <input class="form-control" id="contactPhone" type="tel" inputmode="tel" pattern="[0-9]{10}" placeholder="10-digit number" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button id="proceedToPaymentBtn" class="btn btn-primary">Proceed to Payment</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="paymentModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Secure Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="paymentForm" class="row g-3" autocomplete="off">
                        <div class="col-12">
                            <label for="cardNumber" class="form-label">Card Number</label>
                            <input id="cardNumber" class="form-control" inputmode="numeric" maxlength="19" placeholder="xxxx xxxx xxxx xxxx" required>
                            <div class="form-text">We do not store card details.</div>
                        </div>
                        <div class="col-12">
                            <label for="cardName" class="form-label">Name on Card</label>
                            <input id="cardName" class="form-control" autocomplete="off" required>
                        </div>
                        <div class="col-6">
                            <label for="cardExpiry" class="form-label">Expiry (MM/YY)</label>
                            <input id="cardExpiry" class="form-control" inputmode="numeric" maxlength="5" placeholder="MM/YY" required>
                        </div>
                        <div class="col-6">
                            <label for="cardCvv" class="form-label">CVV</label>
                            <input id="cardCvv" class="form-control" type="password" inputmode="numeric" maxlength="4" placeholder="***" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button id="payNowBtn" class="btn btn-success"><i class="fa fa-lock me-2"></i>Pay Now</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="chatModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-end">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Support Chat</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="chatWindow" class="chat-window">
                        <div class="chat-message bot">Hello! How can we help you today?</div>
                    </div>
                    <div class="input-group mt-3">
                        <input id="chatInput" class="form-control" placeholder="Type your message...">
                        <button id="chatSendBtn" class="btn btn-primary">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="trainDetailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Train Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-2"><strong id="tdTitle"></strong></div>
                    <div class="row g-3">
                        <div class="col-md-4"><div><span class="text-muted">Type:</span> <span id="tdType"></span></div></div>
                        <div class="col-md-4"><div><span class="text-muted">Classes:</span> <span id="tdClasses"></span></div></div>
                        <div class="col-md-4"><div><span class="text-muted">Runs On:</span> <span id="tdDays"></span></div></div>
                        <div class="col-md-4"><div><span class="text-muted">Distance:</span> <span id="tdDistance"></span></div></div>
                        <div class="col-md-4"><div><span class="text-muted">Avg Speed:</span> <span id="tdSpeed"></span></div></div>
                        <div class="col-md-4"><div><span class="text-muted">Duration:</span> <span id="tdDuration"></span></div></div>
                    </div>
                    <hr>
                    <div class="table-responsive">
                        <table class="table table-sm table-striped">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Station</th>
                                    <th>Arr</th>
                                    <th>Dep</th>
                                    <th>Halt</th>
                                    <th>Day</th>
                                </tr>
                            </thead>
                            <tbody id="tdStops"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="railways.js"></script>
</body>
</html> 